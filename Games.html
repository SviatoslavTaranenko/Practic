<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;400;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="Styles/Games.css">
        <title>Games Project - Games</title>
        <style>
            #loading-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 24px;
                font-family: 'Roboto', sans-serif;
            }
        </style>
    </head>
    <body>
        <header class="header">
            <div class="header__all">
                <img class="header__img" src="img/logo.png" alt="Logo">
                <div class="header__items">
                    <div class="header__items_Calculator">
                        <a href="calculator.html">Calculator</a>
                    </div>
                    <div class="header__items_Games">
                        <a href="Games.html">Games</a>
                    </div>
                    <div class="header__items_About">
                        <a href="index.html">About</a>
                    </div>
                    <div class="header__items_Login">
                        <a href="Login.html">Login</a>
                    </div>
                </div>
            </div>
        </header>
        <div class="games__filter">
            <form class="datalist__games_filter">
                <select id="game_properties">
                    <option value="Genre">Genre</option>
                    <option value="Sport">Sport</option>
                    <option value="Shooter">Shooter</option>
                    <option value="Racing">Racing</option>
                    <option value="Horror">Horror</option>
                </select>
            </form>
            <form class="radio__filter">
                <div class="radio__games_filter">
                    <input type="radio" id="platform" name="filter_games" value="Platform">
                    <label for="platform">Platform</label>
                </div>
                <div class="radio__games_filter">
                    <input type="radio" id="online-games" name="filter_games" value="Online games">
                    <label for="online-games">Online games</label>
                </div>
            </form>
            <form class="checkbox__filter" id="filterForm" data-type="filter-form">
                <div class="checkbox__games_filter">
                    <input type="checkbox" data-filter="new" id="new_games" name="New">
                    <label for="new_games">New</label>
                </div>
                <div class="checkbox__games_filter">
                    <input type="checkbox" data-filter="old" id="old_games" name="Old">
                    <label for="old_games">Old</label>
                </div>
            </form>
            <form class="search__bar" action="#">
                <input type="text" id="search" class="search__input" placeholder="Search">
                <button id="apply" type="submit">Apply</button>
            </form>
        </div>
        <section class="Games">
            <h1 class="Games__title">Study project "Games"</h1>
            <div id="loading-overlay">Loading...</div>
            <ul class="card__container" data-type="card-container"></ul>
        </section>

        <template class="card-template">
            <div class="Games__cards_desc" data-type="Games__cards_desc">
                <div class="Games__cards_top">
                    <img src="img/Rectangle%207.png" class="Games__cards_top_img" data-type="Games__cards_top_img" data-card-img alt="Games logo">
                    <div class="Games__cards_top_text" data-type="Games__cards_top_text">
                        <h2 class="Games__cards_top_text_title" data-type="Games__cards_top_text_title" data-card-title></h2>
                        <p class="Games__cards_top_text_p" data-type="Games__cards_top_text_p"></p>
                    </div>
                </div>
                <div class="Games__cards_btm" data-type="Games__cards_btm">
                    <p class="Games__cards_btm_name" data-type="data-card-genre">
                        <span class="Games__cards_btm_bold" data-type="Games__cards_btm_bold" data-card-genre>Genre: </span>
                    </p>
                    <p class="Games__cards_btm_name" data-type="data-card-platform">
                        <span class="Games__cards_btm_bold" data-type="Games__cards_btm_bold" data-card-platform>Platform: </span>
                    </p>
                    <p class="Games__cards_btm_name" data-type="data-card-publisher">
                        <span class="Games__cards_btm_bold" data-type="Games__cards_btm_bold" data-card-publisher>Publisher: </span>
                    </p>
                    <p class="Games__cards_btm_name" data-type="data-card-developer">
                        <span class="Games__cards_btm_bold" data-type="Games__cards_btm_bold" data-card-developer>Developer: </span>
                    </p>
                    <p class="Games__cards_btm_name" data-type="data-card-release-date">
                        <span class="Games__cards_btm_bold" data-type="Games__cards_btm_bold" data-card-release-date>Release_date: </span>
                    </p>
                </div>
            </div>
        </template>
        <script src="scripts/Games.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                // Викликайте функцію для завантаження та рендерингу ігор
                loadAndRenderGames();
            });

            async function loadAndRenderGames() {
                // Відображення "Loading..." при початку завантаження
                const loadingOverlay = document.getElementById('loading-overlay');
                loadingOverlay.style.display = 'flex';

                try {
                    // Робіть GET-запит до API
                    const response = await fetch('https://mmo-games.p.rapidapi.com/games', {
                        method: 'GET',
                        headers: {
                            'X-RapidAPI-Key': '1c3169c707mshb51bff34cbc9ff6p1749b9jsn648a19134256',
                            'X-RapidAPI-Host': 'mmo-games.p.rapidapi.com',
                        },
                    });

                    // Парсінг відповіді у форматі JSON
                    const gamesData = await response.json();

                    // Рендер перших 50 ігор
                    renderGames(gamesData.slice(0, 50));
                } catch (error) {
                    console.error('Помилка при отриманні ігор:', error);
                } finally {
                    // Приховання "Loading..." після завантаження та відображення ігор
                    loadingOverlay.style.display = 'none';
                }
            }
        </script>
    </body>
</html>
